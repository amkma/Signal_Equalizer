{% extends "base.html" %}
{% load static %}

{% block content %}

<section class="uploader">
  <div id="drop-zone" class="drop">
    <div class="hint">Drag & drop an audio file here<br>or click to browse</div>
  </div>
</section>

<main class="workspace">

  <aside class="left-panel">
    <div class="panel-title">
      <span>Equalizer</span>
      <span id="eq-mode-label"></span>
    </div>

    <div id="generic-tools" class="tool-row single-line">
      <button id="btn-scheme-save">Save scheme</button>
      <label class="file-btn">
        <input id="file-scheme" type="file" accept=".json" style="display:none"/>
        <span id="btn-scheme-load">Load scheme</span>
      </label>
      <button id="btn-clear-subband" class="btn-danger" disabled>Clear</button>
    </div>

    <div id="eq-sliders" class="sliders"></div>
  </aside>

  <section class="center-panel">
    <div class="panel-title">Spectrum (click & drag in Generic mode to create band)</div>
    <canvas id="fft-canvas" width="1200" height="260"></canvas>
    <div id="spectrum-loader" class="loader-bar hidden"></div>
  </section>

  <aside id="ai-panel" class="right-panel hidden">
    <div class="panel-title">AI Models</div>
    <div class="tool-row">
      <label>Model:
        <select id="ai-model">
          <option value="demucs">Demucs (music)</option>
          <option value="voices">VoiceSeparator</option>
        </select>
      </label>
      <button id="btn-run-ai" class="btn-primary">Run AI on input</button>
    </div>
    <div id="ai-sliders" class="sliders"></div>
    <div id="ai-outputs" class="ai-outputs"></div>
  </aside>

</main>

<section class="bottom-panels">

  <div class="twocol">
    <div class="panel">
      <div class="panel-title">Input Signal</div>
      <audio id="audio-in" controls style="width:100%; margin-bottom:10px;"></audio>
      <canvas id="wave-in" width="635" height="120"></canvas>
    </div>

    <div class="panel">
      <div class="panel-title">Output Signal</div>
      <audio id="audio-out" controls style="width:100%; margin-bottom:10px;"></audio>
      <canvas id="wave-out" width="635" height="120"></canvas>
    </div>
  </div>

  <div class="twocol" style="margin-top: 20px;">
    <div class="spectrogram-container panel">
      <div class="panel-title">Input Spectrogram</div>
      <div class="spec-wrapper">
        <canvas id="spec-in-canvas" width="540" height="250"></canvas>
        <canvas id="spec-in-axis" width="635" height="290"></canvas>
      </div>
    </div>

    <div class="spectrogram-container panel">
      <div class="panel-title">Output Spectrogram</div>
      <div class="spec-wrapper">
        <canvas id="spec-out-canvas" width="540" height="250"></canvas>
        <canvas id="spec-out-axis" width="635" height="290"></canvas>
      </div>
    </div>
  </div>

  <div class="sync-controls panel" style="margin-top: 20px;">
    <button id="play-input">Play Input</button>
    <button id="play-output">Play Output</button>
    <button id="sync-reset">Reset View</button>
    <span id="status"></span>
  </div>

</section>

{% endblock %}